<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Living Card - Lord of the Eternal Host</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel+Decorative&family=UnifrakturMaguntia&display=swap');

    :root{
      /* Tweak these if your PNG window is a hair off */
      --win-top: 25%;
      --win-right: 15%;
      --win-bottom: 45%;
      --win-left: 15%;
      --win-radius: 18px;
    }

    body{
      font-family:'MedievalSharp',cursive;
      --font-gothic:'UnifrakturMaguntia',cursive;
      overflow:hidden;
      background:#000;
      cursor:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><path fill='%23ffffff' d='M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'/></svg>"),auto;
    }

    .card-container{
      perspective:1000px;
      width: clamp(300px, 90vw, 600px);
      aspect-ratio: 2/3;
      margin: auto;
    }
    .card{
      background:transparent;
      box-shadow:0 0 30px rgba(255,215,0,.5);
      transform-style:preserve-3d;
      will-change: transform;
      transition:transform .1s;
      position:relative;
      overflow:hidden;
      width: 100%;
      height: 100%;
      aspect-ratio: 2/3;
      backface-visibility: hidden;
    }

    @media (prefers-reduced-motion: reduce) {
      .card {
        transform: none !important;
      }
    }

    .character-zone{position:relative;overflow:hidden;}

    .character-overlay{
      position:absolute;top:0;left:0;width:100%;height:100%;
      mix-blend-mode:overlay;opacity:.3;pointer-events:none;
    }

    .glow-effect{
      position:absolute;width:100%;height:100%;
      background:radial-gradient(circle at center, rgba(255,215,0,.3) 0%, transparent 70%);
      pointer-events:none;filter:blur(5px);
    }

    .name-banner{font-family:'Cinzel Decorative',cursive;text-shadow:0 0 15px rgba(0,255,255,.9);letter-spacing:2px;}
    .lore-panel{background:url('http://static.photos/red/1200x630/42') center/cover;box-shadow:inset 0 0 20px rgba(0,0,0,.7);}
    .stat-icon{transition:all .3s ease;}
    .stat-icon:hover{transform:scale(1.2);filter:drop-shadow(0 0 12px #ffd700);}
    .cursor-trail{
      position:absolute;width:20px;height:20px;border-radius:50%;
      background:rgba(255,215,0,.7);pointer-events:none;z-index:9999;transform:translate(-50%,-50%);mix-blend-mode:screen;
    }
    
    /* Celebration particles */
    .celebration-particle {
      position: absolute;
      z-index: 9999;
      filter: drop-shadow(0 0 10px currentColor);
      animation: particle-fall 2s ease-out forwards;
    }
    
    @keyframes particle-fall {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(100px) scale(0.2); opacity: 0; }
    }
    @keyframes pulse{0%{opacity:.3}100%{opacity:.7}}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}
    .floating{animation:float 6s ease-in-out infinite;}

    .character-window{
      position:absolute;
      inset: 15% 10% 25% 10%;
      border-radius: 18px;
      overflow:hidden;
      z-index:4;
    }
    .character-window video{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .card-frame{
      position:absolute; 
      inset:0;
      width:100%;
      height:100%;
      object-fit:contain; 
      z-index:5; 
      pointer-events:none;
    }
  </style>
</head>
<body class="h-screen w-screen flex items-center justify-center p-4">

  <div id="cursor-trails"></div>

  <div class="card-container">
    <div id="card" class="card rounded-lg flex flex-col relative">
      <div class="glow-effect"></div>

      <!-- Character Zone -->
      <div class="character-zone flex-1 relative overflow-hidden" style="height:100%;">

        <!-- background tint (subtle, stays behind) -->
        <div class="absolute inset-0 bg-black/60"></div>

        <!-- STACK: fitted character video inside frame window + silver frame -->
        <div class="frame-stack">
          <div class="art-fit">
            <div class="character-window">
              <video autoplay muted loop playsinline preload="auto">
                <source src="background.mp4" type="video/mp4">
              </video>
            </div>

            <!-- Silver frame PNG with transparent center -->
            <img
              src="./OG%20Base%20card%20special%20silver.png"
              alt="OG Base Card - Silver Frame"
              class="card-frame"
            />
          </div>
        </div>

        <div class="character-overlay"></div>

        <!-- Soft center glow -->
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="w-3/4 h-3/4 bg-gradient-to-b from-transparent via-yellow-900/10 to-transparent rounded-full filter blur-xl opacity-30"></div>
        </div>
      </div>

      <!-- Scoreboard -->
      <div id="scoreboard" class="absolute top-4 left-4 bg-black/70 rounded-lg p-2 hidden" style="z-index: 9999;">
        <div class="text-cyan-300 font-bold mb-1">რეკორდი</div>
        <div id="scores-container" class="flex flex-col gap-1"></div>
      </div>

      <!-- Tap Counter Game -->
      <div id="tap-game-container" class="absolute inset-0 flex items-start justify-center pt-[15%] hidden pointer-events-none z-50">
        <div class="relative">
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-48 h-48 rounded-full bg-yellow-900/80 border-6 border-yellow-700 blur-sm"></div>
          </div>
          <div class="relative bg-yellow-900/90 rounded-full w-48 h-48 flex items-center justify-center border-6 border-yellow-700 shadow-lg">
            <div id="tap-count" class="text-5xl font-bold hidden font-gothic text-yellow-200 transition-all duration-300">0</div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Scoreboard empty state
    const scoresContainer = document.getElementById('scores-container');
    const emptyScore = document.createElement('div');
    emptyScore.className = 'score text-gray-500 text-sm';
    emptyScore.textContent = '---';
    scoresContainer.appendChild(emptyScore);

    // Mouse parallax effect
    const card = document.getElementById('card');
    let lastTime = 0;
    
    const handleMove = (e) => {
      const now = performance.now();
      if (now - lastTime < 16) return; // ~60fps
      lastTime = now;
      
      const xAxis = (window.innerWidth/2 - e.clientX)/25;
      const yAxis = (window.innerHeight/2 - e.clientY)/25;
      card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
    };

    // Throttled event listeners
    document.addEventListener('mousemove', (e) => {
      requestAnimationFrame(() => handleMove(e));
    });

    document.addEventListener('touchmove', (e) => {
      if (e.touches.length === 1) {
        e.preventDefault();
        requestAnimationFrame(() => handleMove(e.touches[0]));
      }
    }, { passive: false });

    // Reset position when interaction ends
    const resetPosition = () => {
      card.style.transform = 'rotateY(0) rotateX(0)';
    };
    document.addEventListener('mouseleave', resetPosition);
    document.addEventListener('touchend', resetPosition);
  </script>
</body>
</html>
