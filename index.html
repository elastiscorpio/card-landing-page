<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Living Card - Lord of the Eternal Host</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel+Decorative&family=UnifrakturMaguntia&display=swap');
        
        body {
            font-family: 'MedievalSharp', cursive;
            --font-gothic: 'UnifrakturMaguntia', cursive;
            overflow: hidden;
            background: #000;
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><path fill='%23ffffff' d='M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /></svg>"), auto;
        }
        
        .card-container {
            perspective: 1000px;
            transform-style: preserve-3d;
        }
        
        .card {
            background: linear-gradient(135deg, #2a0e0e 0%, #0e0a2a 100%);
            border: 12px solid transparent;
            border-image: url('http://static.photos/red/1200x630/42') 30 round;
            box-shadow: 0 0 70px rgba(255, 50, 50, 0.5), 
                        inset 0 0 40px rgba(255, 100, 100, 0.4);
            transform-style: preserve-3d;
            transition: transform 0.1s;
            position: relative;
            overflow: hidden;
            backface-visibility: visible;
        }
        
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a0a0a 0%, #0a061a 100%);
            border: 12px solid transparent;
            border-image: url('http://static.photos/red/1200x630/42') 30 round;
            transform: rotateY(180deg);
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            text-align: center;
        }
        
        .card-back h2 {
            font-family: 'Cinzel Decorative', cursive;
            color: #ff5050;
            font-size: 2rem;
            margin-bottom: 1rem;
            text-shadow: 0 0 10px rgba(255, 80, 80, 0.7);
        }
        
        .card-back p {
            color: #e0e0e0;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }
        
        .card-back-sigil {
            width: 120px;
            height: 120px;
            background: url('http://static.photos/red/200x200/42') center/contain no-repeat;
            opacity: 0.8;
            margin: 1rem 0;
        }
        
        .character-zone {
            position: relative;
            overflow: hidden;
        }
        
        .character-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('http://static.photos/black/1200x630/42') center/cover;
            mix-blend-mode: overlay;
            opacity: 0.3;
            pointer-events: none;
        }
        
        .glow-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255,100,100,0.3) 0%, transparent 70%);
            animation: pulse 4s infinite alternate;
            pointer-events: none;
        }
        
        .name-banner {
            font-family: 'Cinzel Decorative', cursive;
            text-shadow: 0 0 15px rgba(255, 100, 100, 0.9);
            letter-spacing: 2px;
        }
        
        .lore-panel {
            background: url('http://static.photos/red/1200x630/42') center/cover;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.7);
        }
        
        .stat-icon {
            transition: all 0.3s ease;
        }
        
        .stat-icon:hover {
            transform: scale(1.2);
            filter: drop-shadow(0 0 12px #ff5050);
        }
        
        .cursor-trail {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 100, 100, 0.7);
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            mix-blend-mode: screen;
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; }
            100% { opacity: 0.7; }
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
    </style>
</head>
<body class="h-screen w-screen flex items-center justify-center p-4">
    <div id="cursor-trails"></div>
    
    <div class="card-container w-full h-full max-w-2xl max-h-[90vh]">
        <div id="card" class="card w-full h-full rounded-lg flex flex-col relative">
            <div class="glow-effect"></div>
            
            <!-- Name Banner -->
            <div class="name-banner text-center pt-6 px-4 z-10">
                <h1 class="text-4xl md:text-5xl text-red-400 mb-1">LORD MALRAK</h1>
                <h2 class="text-xl md:text-2xl text-red-300 italic">of the Eternal Host</h2>
                <div class="flex justify-center mt-2">
                    <i data-feather="crown" class="text-yellow-400 animate-pulse" id="secret-trigger"></i>
                </div>
            </div>
            
            <!-- Character Zone -->
            <div class="character-zone flex-1 relative my-2 mx-4 rounded-lg overflow-hidden" style="height: 60%;">
                <div class="absolute inset-0 bg-black opacity-70"></div>
                <video autoplay loop muted class="w-full h-full object-cover">
                    <source src="http://static.photos/black/1200x630/42" type="video/mp4">
                </video>
                <div class="character-overlay"></div>
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="w-3/4 h-3/4 bg-gradient-to-b from-transparent via-yellow-900/10 to-transparent rounded-full filter blur-xl opacity-30"></div>
                </div>
            </div>
            
            <!-- Lore Panel -->
            <div class="lore-panel mx-4 mb-4 p-4 rounded-lg text-yellow-100 text-sm overflow-y-auto" style="height: 30%;">
                <h3 class="text-yellow-300 font-bold mb-2 text-lg border-b border-yellow-800 pb-1">LORE OF THE ETERNAL HOST</h3>
                <p class="mb-2 fade-in-text">Once a mortal king who sought eternal life, Lord Malrak made a pact with the ancient ones.</p>
                <p class="mb-2 fade-in-text">Now he commands legions of the undying, bound to his will through dark rituals.</p>
                <p class="mb-2 fade-in-text">His golden crown hides the hollow skull beneath, yet his power grows with each soul consumed.</p>
                <p class="mb-2 fade-in-text">Whispers speak of a hidden weakness, a secret known only to the oldest of ghosts.</p>
                
                <div id="secret-text" class="hidden mt-4 text-yellow-400 italic">
                    <p>Only moonlight can reveal his true form...</p>
                </div>
            </div>
            
            <!-- Power Quote -->
            <div class="mx-4 mb-4 text-center relative">
                <div class="relative w-full">
                    <svg width="100%" height="60" viewBox="0 0 300 60" preserveAspectRatio="none">
                        <path d="M10,10 Q150,0 290,10 L270,50 Q150,60 30,50 Z" fill="none" stroke="#ff0000" stroke-width="2" />
                        <path d="M10,10 Q150,0 290,10 L270,50 Q150,60 30,50 Z" fill="rgba(120,0,0,0.5)" />
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <p class="text-red-200 italic font-bold tracking-wider px-8">"THE DEAD SHALL SERVE... FOREVER."</p>
                    </div>
                </div>
            </div>
            
            <!-- Stats -->
            <div class="flex justify-between px-4 pb-4">
                <div class="flex justify-between w-full px-4">
                    <div class="stat-icon group">
                        <div class="text-red-400 flex flex-col items-center">
                            <svg class="w-16 h-16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                                <path d="M2 2l7.586 7.586"></path>
                                <circle cx="11" cy="11" r="2"></circle>
                            </svg>
                            <span class="text-lg mt-1 font-gothic">ATTACK</span>
                            <span class="text-3xl font-bold">95</span>
                        </div>
                    </div>
                    <div class="stat-icon group">
                        <div class="text-yellow-400 flex flex-col items-center">
                            <svg class="w-16 h-16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                <path d="M12 8v4"></path>
                                <path d="M12 16h.01"></path>
                            </svg>
                            <span class="text-lg mt-1 font-gothic">DEFENSE</span>
                            <span class="text-3xl font-bold">80</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tap Counter Game -->
            <div id="tap-game-container" class="absolute inset-0 flex items-center justify-center hidden pointer-events-none">
                <div class="relative">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-64 h-64 rounded-full bg-red-900/80 border-8 border-red-700 blur-sm"></div>
                    </div>
                    <div class="relative bg-red-900/90 rounded-full w-64 h-64 flex items-center justify-center border-8 border-red-700 shadow-lg">
                        <div id="tap-count" class="text-6xl font-bold hidden font-gothic text-red-200">0</div>
                    </div>
                </div>
            </div>

            <!-- Back Side -->
            <div class="card-back">
                <h2>LORD MALRAK</h2>
                <div class="card-back-sigil"></div>
                <p>"Bound by ancient blood oaths, my power stretches beyond death itself."</p>
                <p class="text-sm italic">Property of the Eternal Legion</p>
                <p class="text-xs mt-4">Do not meddle in affairs of the undying</p>
            </div>
        </div>
    </div>
    
    <!-- Audio Element -->
    <audio id="ambient-sound" loop>
        <source src="https://www.soundjay.com/misc/sounds/wind-chime-01.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        // Initialize libraries
        AOS.init();
        feather.replace();
        
        // Reset scale on double tap
        document.addEventListener('dblclick', () => {
            scale = 1;
            card.style.transform = card.style.transform.replace(/scale\([^)]*\)/, 'scale(1)');
        });
        
        // Device motion and touch handling
        let scale = 1;
        let initialDistance = null;
        const card = document.getElementById('card');
        
        // 3D Card Rotation with Touch
        let touchStartX = 0;
        let touchStartY = 0;
        let rotationX = 0;
        let rotationY = 0;
        let isDragging = false;
        let prevTouchX = 0;
        let prevTouchY = 0;
        let velocityX = 0;
        let velocityY = 0;
        const friction = 0.95;
        const rotationSpeed = 0.5;

        function updateCardRotation() {
            card.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg) scale(${scale})`;
            
            // Apply inertia
            if (!isDragging && (Math.abs(velocityX) > 0.1 || Math.abs(velocityY) > 0.1)) {
                rotationY += velocityX;
                rotationX += velocityY;
                velocityX *= friction;
                velocityY *= friction;
                requestAnimationFrame(updateCardRotation);
            }
        }

        document.addEventListener('touchstart', (e) => {
            if (e.touches.length === 1) {
                isDragging = true;
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                prevTouchX = touchStartX;
                prevTouchY = touchStartY;
                velocityX = 0;
                velocityY = 0;
            }
        });

        document.addEventListener('touchmove', (e) => {
            if (isDragging && e.touches.length === 1) {
                e.preventDefault();
                const touchX = e.touches[0].clientX;
                const touchY = e.touches[0].clientY;
                
                // Calculate movement delta
                const deltaX = touchX - prevTouchX;
                const deltaY = touchY - prevTouchY;
                
                // Update rotation based on movement
                rotationY += deltaX * rotationSpeed;
                rotationX -= deltaY * rotationSpeed;
                
                // Store current touch for next move event
                prevTouchX = touchX;
                prevTouchY = touchY;
                
                // Calculate velocity for inertia
                velocityX = deltaX * rotationSpeed * 0.5;
                velocityY = -deltaY * rotationSpeed * 0.5;
                
                updateCardRotation();
            }
        });

        document.addEventListener('touchend', () => {
            isDragging = false;
            // Apply inertia
            if (Math.abs(velocityX) > 0.1 || Math.abs(velocityY) > 0.1) {
                requestAnimationFrame(updateCardRotation);
            }
        });
        
        // Mouse movement for desktop with full 3D rotation
        let mouseDown = false;
        let lastMouseX = 0;
        let lastMouseY = 0;

        document.addEventListener('mousedown', (e) => {
            mouseDown = true;
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
            velocityX = 0;
            velocityY = 0;
        });

        document.addEventListener('mousemove', (e) => {
            if (mouseDown) {
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                
                rotationY += deltaX * rotationSpeed;
                rotationX -= deltaY * rotationSpeed;
                
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                
                velocityX = deltaX * rotationSpeed * 0.5;
                velocityY = -deltaY * rotationSpeed * 0.5;
                
                updateCardRotation();
            } else {
                // Cursor trails (keep existing)
                const trail = document.createElement('div');
                trail.className = 'cursor-trail';
                trail.style.left = `${e.pageX}px`;
                trail.style.top = `${e.pageY}px`;
                document.getElementById('cursor-trails').appendChild(trail);
                
                setTimeout(() => {
                    trail.style.opacity = '0';
                    trail.style.transform = 'translate(-50%, -50%) scale(2)';
                    setTimeout(() => trail.remove(), 300);
                }, 500);
            }
        });

        document.addEventListener('mouseup', () => {
            mouseDown = false;
            if (Math.abs(velocityX) > 0.1 || Math.abs(velocityY) > 0.1) {
                requestAnimationFrame(updateCardRotation);
            }
        });

        document.addEventListener('mouseleave', () => {
            mouseDown = false;
        });
            
            // Create cursor trails
            const trail = document.createElement('div');
            trail.className = 'cursor-trail';
            trail.style.left = `${e.pageX}px`;
            trail.style.top = `${e.pageY}px`;
            document.getElementById('cursor-trails').appendChild(trail);
            
            // Remove trails after animation
            setTimeout(() => {
                trail.style.opacity = '0';
                trail.style.transform = 'translate(-50%, -50%) scale(2)';
                setTimeout(() => trail.remove(), 300);
            }, 500);
        });
        
        // Pinch-to-zoom functionality
        document.addEventListener('touchstart', (e) => {
            if (e.touches.length === 2) {
                initialDistance = Math.hypot(
                    e.touches[0].clientX - e.touches[1].clientX,
                    e.touches[0].clientY - e.touches[1].clientY
                );
            }
        });
        
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length === 2) {
                const currentDistance = Math.hypot(
                    e.touches[0].clientX - e.touches[1].clientX,
                    e.touches[0].clientY - e.touches[1].clientY
                );
                
                if (initialDistance) {
                    const newScale = Math.min(Math.max(scale * (currentDistance / initialDistance), 0.5), 3);
                    scale = newScale;
                    card.style.transform = card.style.transform.replace(/scale\([^)]*\)/, `scale(${scale})`);
                }
                initialDistance = currentDistance;
            }
        });
        
        document.addEventListener('touchend', () => {
            initialDistance = null;
        });
        
        // Character hover effect
        const characterZone = document.querySelector('.character-zone');
        characterZone.addEventListener('mouseenter', () => {
            gsap.to('.character-overlay', { opacity: 0.5, duration: 0.5 });
            gsap.to('.glow-effect', { opacity: 0.8, duration: 0.5 });
        });
        characterZone.addEventListener('mouseleave', () => {
            gsap.to('.character-overlay', { opacity: 0.3, duration: 0.5 });
            gsap.to('.glow-effect', { opacity: 0.3, duration: 0.5 });
        });
        
        // Secret trigger
        let clickCount = 0;
        document.getElementById('secret-trigger').addEventListener('click', () => {
            clickCount++;
            if (clickCount >= 3) {
                document.getElementById('secret-text').classList.remove('hidden');
                gsap.from('#secret-text', { opacity: 0, y: 20, duration: 1 });
                clickCount = 0;
                
                // Play sound
                const audio = new Audio('https://www.soundjay.com/misc/sounds/magic-chime-01.mp3');
                audio.play();
            }
        });
        
        // Ambient sound control
        const ambientSound = document.getElementById('ambient-sound');
        ambientSound.volume = 0.3;
        
        // Start sound after user interaction
        document.addEventListener('click', () => {
            ambientSound.play();
        }, { once: true });
        
        // Handle touch events for mobile
        document.addEventListener('touchstart', () => {
            ambientSound.play();
        }, { once: true });
        
        // Animate text appearance
        const fadeInText = document.querySelectorAll('.fade-in-text');
        fadeInText.forEach((el, i) => {
            gsap.from(el, {
                opacity: 0,
                y: 10,
                duration: 0.8,
                delay: i * 0.3,
                ease: "power2.out"
            });
        });

        // Tap Counter Game
        const tapGameContainer = document.getElementById('tap-game-container');
        const tapCount = document.getElementById('tap-count');
        const finalScore = document.getElementById('final-score');
        const instruction = document.getElementById('counter-instruction');
        
        let tapCounter = 0;
        let timeoutId = null;
        let isCounting = false;
        
        document.addEventListener('click', () => {
            if (!isCounting) {
                // Start the game
                isCounting = true;
                tapCounter = 1;
                tapGameContainer.classList.remove('hidden');
                tapCount.textContent = tapCounter;
                tapCount.classList.remove('hidden');
                instruction.classList.add('hidden');
                finalScore.classList.add('hidden');
                
                // Glow effect
                gsap.to('.glow-effect', { opacity: 0.8, duration: 0.2 });
                setTimeout(() => gsap.to('.glow-effect', { opacity: 0.3, duration: 0.5 }), 200);
                
                // Play sound
                const audio = new Audio('https://www.soundjay.com/misc/sounds/magic-chime-01.mp3');
                audio.volume = 0.2;
                audio.play();
            } else {
                // Increment counter
                tapCounter++;
                tapCount.textContent = tapCounter;
                
                // Random card tilt effect
                if (tapCounter % 5 === 0) {
                    gsap.to('#card', {
                        rotateZ: Math.random() * 10 - 5,
                        duration: 0.2,
                        yoyo: true,
                        repeat: 1
                    });
                }
            }
            
            // Reset timeout
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                // End the game
                isCounting = false;
                // Alternate between updating attack and defense numbers with proper colors
                if (Math.random() > 0.5) {
                    const attackElement = document.querySelector('.stat-icon:nth-child(1) .text-3xl');
                    attackElement.textContent = tapCounter;
                    attackElement.classList.remove('text-yellow-400');
                    attackElement.classList.add('text-red-400');
                } else {
                    const defenseElement = document.querySelector('.stat-icon:nth-child(2) .text-3xl');
                    defenseElement.textContent = tapCounter;
                    defenseElement.classList.remove('text-red-400');
                    defenseElement.classList.add('text-yellow-400');
                }
                
                // Create fireworks
                const colors = ['#ff0000', '#ff9900', '#ffff00', '#00ff00', '#0099ff', '#9900ff'];
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        const firework = document.createElement('div');
                        firework.className = 'absolute rounded-full w-2 h-2';
                        firework.style.background = colors[Math.floor(Math.random() * colors.length)];
                        firework.style.left = `${Math.random() * 100}%`;
                        firework.style.top = `${Math.random() * 100}%`;
                        firework.style.boxShadow = `0 0 10px 2px ${colors[Math.floor(Math.random() * colors.length)]}`;
                        document.getElementById('card').appendChild(firework);
                        
                        gsap.to(firework, {
                            x: (Math.random() - 0.5) * 200,
                            y: (Math.random() - 0.5) * 200,
                            scale: 5,
                            opacity: 0,
                            duration: 1,
                            onComplete: () => firework.remove()
                        });
                    }, i * 50);
                }
                
                // Play sound
                const audio = new Audio('https://www.soundjay.com/misc/sounds/magic-chime-02.mp3');
                audio.volume = 0.5;
                audio.play();
                
                // Hide the game container after delay
                setTimeout(() => {
                    tapGameContainer.classList.add('hidden');
                }, 1500);
            }, 1000);
        });
    </script>
</body>
</html>
